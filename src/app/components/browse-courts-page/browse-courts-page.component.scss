$bg: #0f1b26;
$panel: rgba(255, 255, 255, 0.08);
$border: rgba(214, 221, 230, 0.15);
$accent: #a7ee43;
$accent-border: rgba(167, 238, 67, 0.4);
$text: #d6dde6;
$muted: #9aa7b5;
$white: #fff;

.page {
  position: relative;
  min-height: 100vh;
  color: $white;
  isolation: isolate;

  &.page-gradient-bg::before,
  &.page-gradient-bg::after {
    z-index: 0;
  }
}
.container { max-width: 1280px; margin: 0 auto; padding: 0 16px; }

.header {
  position: sticky; top: 0; z-index: 50; background: #12202e; border-bottom: 1px solid $border;
  .glow { position: absolute; pointer-events: none; border-radius: 999px; filter: blur(16px);
    &--left { left: 80px; top: -24px; width: 128px; height: 128px; background: linear-gradient(90deg, transparent, $accent); }
    &--right { right: 32px; top: -16px; width: 80px; height: 80px; background: linear-gradient(90deg, transparent, $text); }
  }
}

.header__inner { height: 80px; display: flex; align-items: center; justify-content: space-between; }

.brand { display: flex; align-items: center; gap: 12px; }
.logo-mark { width: 48px; height: 48px; border-radius: 16px; background: $accent; display: grid; place-items: center; }
.logo-svg { width: 32px; height: 32px; }
.brand__text { line-height: 1; }
.brand__title { color: $accent; font-weight: 800; font-size: 24px; letter-spacing: 0.08em; }
.brand__subtitle { color: $muted; font-size: 14px; margin-top: 2px; }

.nav { display: none; gap: 32px; align-items: center; 
  &--desktop { display: none; }
}
.nav__link { color: $text; font-weight: 600; text-decoration: none;
  &--active { color: $accent; }
  &--muted { color: #bfcad6; }
  &:hover { color: $white; }
}

@media (min-width: 1024px) { .nav--desktop { display: flex; } }

.actions { display: none; gap: 12px; align-items: center; 
  &--desktop { display: none; }
}
.user-mail { color: $muted; font-size: 14px; }
.btn { height: 36px; padding: 0 12px; border-radius: 8px; border: 1px solid $border; background: $panel; color: $text; font-weight: 600; font-size: 14px; }
.btn--block { width: 100%; }
.btn--accent { background: $accent; color: #000a14; border-color: $accent-border; font-weight: 700; }
.btn-icon { padding: 8px; border-radius: 8px; color: $text; background: transparent; border: 0; }
.icon { width: 24px; height: 24px; }

@media (min-width: 1024px) { .actions--desktop { display: flex; } .nav-toggle { display: none; } }

.drawer { border-top: 1px solid $border; background: rgba(255, 255, 255, 0.06); }
.drawer__inner { padding: 12px 16px; display: flex; flex-direction: column; gap: 8px; }
.drawer__link { padding: 8px 0; font-weight: 700; color: $text; &--active { color: $accent; } &--muted { color: #cbd4dd; } }
.divider { height: 1px; background: $border; margin: 8px 0; }
.drawer__mail { color: $muted; font-size: 14px; }

.hero { position: relative; overflow: hidden; }
.glow--hero-a { position: absolute; left: 40px; top: 40px; width: 128px; height: 128px; background: linear-gradient(90deg, transparent, $accent); border-radius: 999px; filter: blur(16px); }
.glow--hero-b { position: absolute; right: 96px; top: 64px; width: 192px; height: 192px; background: linear-gradient(90deg, transparent, $accent); border-radius: 999px; filter: blur(18px); }
.glow--hero-c { position: absolute; right: 224px; top: 40px; width: 80px; height: 80px; background: linear-gradient(90deg, transparent, $text); border-radius: 999px; filter: blur(16px); }

.hero__inner { padding: 40px 16px 48px; }
.hero__title { font-size: 40px; font-weight: 800; letter-spacing: 0.02em; }
.hero__subtitle { color: $muted; margin-top: 8px; font-size: 16px; }
.muted { color: #d6dde6; }
.accent { color: $accent; }

.filters { margin-top: 24px; border: 1px solid $border; background: $panel; border-radius: 16px; padding: 16px; backdrop-filter: blur(6px); }
.filters__row { display: flex; flex-direction: column; gap: 12px; align-items: stretch; justify-content: space-between; }
@media (min-width: 1024px) { .filters__row { flex-direction: row; align-items: center; } }

.pills { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; row-gap: 8px; }
.more-inline { margin-top: 8px; display: flex; flex-wrap: wrap; gap: 8px; }
.sep { display: none; width: 1px; height: 24px; background: $border; margin: 0 8px; }
@media (min-width: 768px) { .sep { display: block; } }

.pill { padding: 6px 12px; border-radius: 999px; font-size: 14px; font-weight: 600; border: 1px solid $border; color: $text; background: $panel; white-space: nowrap;
  &:hover { background: rgba(255, 255, 255, 0.12); }
}
.pill--active { background: $accent; color: #000a14; border-color: $accent-border; }
.pill--more { border-color: rgba(167, 238, 67, 0.3); color: $accent; }

.sort { display: flex; align-items: center; gap: 12px; }
.sort__label { color: $muted; font-size: 14px; }
.sort__select-wrapper { position: relative; display: inline-flex; align-items: center; }
.sort__select {
  height: 36px;
  border-radius: 8px;
  background: $panel;
  color: $text;
  font-size: 14px;
  padding: 0 36px 0 12px;
  border: 1px solid $border;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
.sort__select:focus {
  outline: none;
  border-color: $accent-border;
  box-shadow: 0 0 0 3px rgba(167, 238, 67, 0.25);
}
.sort__caret {
  position: absolute;
  right: 12px;
  pointer-events: none;
  color: $muted;
  font-size: 14px;
}

.filters__row2 { margin-top: 12px; display: grid; grid-template-columns: 1fr; gap: 12px; }
@media (min-width: 640px) { .filters__row2 { grid-template-columns: repeat(3, 1fr); } }

.field .label { color: $muted; font-size: 12px; margin-bottom: 6px; }
.field__controls { display: flex; align-items: center; gap: 8px; }
.field__controls--time .pbp-datepicker .p-inputtext { min-width: 8rem; }
.input { height: 32px; border-radius: 8px; border: 1px solid $border; background: $panel; color: $text; padding: 0 10px; width: 100%; }

/* PrimeNG DatePicker theming (scoped) */
:host ::ng-deep .pbp-datepicker {
  .p-inputtext {
    height: 36px;
    border-radius: 8px;
    background: $panel;
    color: $text;
    border: 1px solid $border;
    padding: 0 10px 0 36px; /* room for icon */
  }
  .p-datepicker-trigger {
    color: $text;
  }
}

:host ::ng-deep .pbp-datepicker-panel {
  /* Make the calendar panel fully readable on dark bg */
  background: #101821; /* solid dark, no transparency */
  border: 1px solid rgba(214, 221, 230, 0.25);
  color: #e6edf5;
  border-radius: 12px;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.65);
  mix-blend-mode: normal;
  z-index: 10000 !important; // ensure above cards/blur layers
  .p-datepicker-header {
    background: #0f1b26;
    color: #d6dde6;
    border-bottom: 1px solid rgba(214, 221, 230, 0.18);
  }
  .p-datepicker-calendar {
    th { color: #9aa7b5; }
    td > span {
      color: #d6dde6;
      border-radius: 10px;
    }
    td > span.p-highlight {
      background: $accent;
      color: #000a14;
    }
    td > span:not(.p-highlight):hover {
      background: rgba(255,255,255,0.08);
    }
  }
  .p-datepicker-buttonbar,
  .p-timepicker {
    background: #0f1b26;
    border-top: 1px solid rgba(214, 221, 230, 0.18);
  }
}

.count { margin-top: 16px; color: $muted; font-size: 14px; }
.count__num { color: $white; font-weight: 700; }

.grid { margin-top: 16px; display: grid; grid-template-columns: 1fr; gap: 16px; }
@media (min-width: 768px) { .grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 1024px) { .grid { grid-template-columns: repeat(3, 1fr); } }
